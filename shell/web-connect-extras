#!/usr/bin/sh
# post web connection utilities

USER=austin
USER_HOME=/home/$USER
RCLONE="rclone --config=$USER_HOME/.config/rclone/rclone.conf"

# testing connection
ping -c 3 www.google.com
echo "--------------------"

# firewall
echo "establishing firewall..."
sudo systemctl start iptables
echo "--------------------"

# fetch for conky
curl -o /tmp/ipinfo https://ipinfo.io
#curl -o /tmp/forecast wttr.in/$(cat /tmp/zip)                                                   # forecast / weather
#sudo -u $USER checkupdates > /tmp/off.updates							# check official updates
#$USER_HOME/scripts/shell/aur-checkupdate							# check aur updates
#echo "--------------------"

# create backups
echo "creating boot time backups..."
#$USER_HOME/git/scripts/backup-cloud	
sudo $USER_HOME/scripts/backup-onboot
#remove cached package version except most recent +1
paccache -rk2
# update mirrors by speed
$USER_HOME/scripts/updmirrors

echo "--------------------"
# set bluelight blocking
# managed in .xinitrc
#LATITUDE=33.43
#LONGITUDE=-84.91
#/bin/redshift -l $LATITUDE:$LONGITUDE 
# misc alterations
$USER_HOME/scripts/shell/playlist-conversion #make android playlists compatible with linux filetree

# start local backup server
echo "Starting Syncthing Daemon..."
systemctl start syncthing@austin.service
